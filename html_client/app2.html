<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Document</title>
    </head>
    <body>
        <div>
            <canvas id="myChart"></canvas>
        </div>
        
        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
        
        <script>
            // consumo de nuestra APIRest
            fetch("http://localhost:3000/api/v1/randomAPI/credit_cards/20")
            .then(response => response.json())
            .then(responseJSON => {
                // Pintamos en el grÃ¡fico la cantidad de tarjetas por tipo
                // const cardsArray = responseJSON.reduce((count, cards) => {
                //     if (count[responseJSON.credit_card_type]) {
                //         count[responseJSON.credit_card_type]++;
                //     } else {
                //         count[responseJSON.credit_card_type] = 1;
                //     }
                //     return count;
                // },{});
                for (const objecte in responseJSON.credit_card_type) {
                    cardsArray.push(objecte); 
                }

                // Obtenim el context del canvas
                const ctx = document.getElementById('myChart');                        

                new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['visa', 'switch', 'solo', 'mastercard', 'maestro', 'laser', 'jcb', 'discover', 'diners_club', 'dankort', 'american_express', 'forbrugsforeningen'],
                    datasets: [{
                    label: 'Credit Card Types',
                    data: cardsArray.length,
                    // borderWidth: 1
                    backgroundColor: 
                    [
                            'rgb(255, 99, 132)',
                            'rgb(75, 192, 192)',
                            'rgb(255, 205, 86)',
                            'rgb(201, 203, 207)',
                            'rgb(54, 162, 235)',
                            'rgb(255, 99, 132)',
                            'rgb(75, 192, 192)',
                            'rgb(255, 205, 86)',
                            'rgb(201, 203, 207)',
                            'rgb(54, 162, 235)'
                        ]
                    }]
                }
            });
            })
            .catch(err => console.log(err))
        </script>
        
    </body>
</html>